# HTTP

HTTP（超文本传输协议）是互联网上应用最广泛的网络传输协议。

## HTTP 1.x

### 1. 基本特点

1. **请求-响应模型**

   - 客户端发起请求
   - 服务器返回响应
   - 无状态协议

2. **连接特点**

   - 短连接
   - 每个请求都需要建立新的 TCP 连接
   - 连接复用效率低

3. **头部特点**
   - 文本格式
   - 头部信息冗余
   - 不支持压缩

### 2. 主要问题

1. **性能问题**

   - 连接无法复用
   - 头部信息重复
   - 队头阻塞

2. **资源浪费**

   - 每个请求都需要建立连接
   - 头部信息重复传输
   - 带宽利用率低

3. **扩展性限制**
   - 不支持服务器推送
   - 不支持多路复用
   - 优先级控制有限

## HTTP 2

### 1. 核心特性

1. **多路复用**

   - 单一 TCP 连接
   - 多个请求并行
   - 避免队头阻塞

2. **头部压缩**

   - HPACK 算法
   - 静态字典
   - 动态字典

3. **服务器推送**
   - 主动推送资源
   - 减少请求次数
   - 提高加载速度

### 2. 性能优化

1. **连接优化**

   - 连接复用
   - 减少连接建立
   - 降低延迟

2. **传输优化**

   - 头部压缩
   - 二进制分帧
   - 优先级控制

3. **应用优化**
   - 服务器推送
   - 请求优先级
   - 流量控制

## HTTP 3

### 1. 主要特点

1. **基于 QUIC**

   - 使用 UDP 传输
   - 内置 TLS 1.3
   - 零 RTT 连接

2. **改进的传输**

   - 多路复用
   - 连接迁移
   - 更好的拥塞控制

3. **安全性提升**
   - 强制加密
   - 更快的握手
   - 更好的安全性

### 2. 优势

1. **性能优势**

   - 更快的连接建立
   - 更好的多路复用
   - 更低的延迟

2. **可靠性优势**

   - 更好的拥塞控制
   - 连接迁移支持
   - 更好的错误恢复

3. **安全性优势**
   - 内置加密
   - 更安全的握手
   - 更好的隐私保护

## HTTP2 的核心改进

### 1. 协议层面

1. **二进制分帧**

   - 帧类型
   - 帧头部
   - 帧负载

2. **多路复用**

   - 流的概念
   - 流的优先级
   - 流的控制

3. **头部压缩**
   - HPACK 算法
   - 静态表
   - 动态表

### 2. 性能层面

1. **连接优化**

   - 单一 TCP 连接
   - 连接复用
   - 减少连接建立

2. **传输优化**

   - 头部压缩
   - 二进制传输
   - 优先级控制

3. **应用优化**
   - 服务器推送
   - 请求优先级
   - 流量控制

## QUIC 的核心改进

### 1. 传输层改进

1. **基于 UDP**

   - 避免 TCP 限制
   - 更灵活的传输
   - 更好的移动支持

2. **多路复用**

   - 独立的流
   - 无队头阻塞
   - 更好的并发

3. **连接迁移**

   - 支持 IP 变化
   - 支持网络切换
   - 更好的移动体验

4. **前向纠错**
   - 数据包冗余编码
   - 自动恢复丢失数据
   - 减少重传请求
   - 提高传输效率

### 2. 安全特性

1. **内置 TLS**

   - TLS 1.3
   - 零 RTT 连接
   - 更快的握手

2. **加密传输**

   - 端到端加密
   - 更好的隐私
   - 更强的安全性

3. **身份验证**
   - 连接标识
   - 源地址验证
   - 防重放攻击

### 3. 性能优化

1. **连接优化**

   - 零 RTT 连接
   - 连接复用
   - 快速恢复

2. **传输优化**

   - 更好的拥塞控制
   - 更低的延迟
   - 更好的带宽利用

3. **应用优化**
   - 更好的多路复用
   - 更灵活的优先级
   - 更好的流量控制
